2022-12-06  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/ParserNonXS.pm (_end_line_def_line),
	tp/Texinfo/XS/parsetexi/end_line.c (end_line_def_line): do not call
	abort_empty_line when processing the @def* line, there is no empty
	line to abort.

2022-12-06  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/ParserNonXS.pm (_merge_text): use explicitely scalar()
	for clearer code.

	(_isolate_last_space, _end_line_def_line): better debugging output.

2022-12-06  Patrice Dumas  <pertusus@free.fr>

	* tp/t/01use.t: update tree.  Do not use 'use vars'.

2022-12-06  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/ParserNonXS.pm (_parse_def),
	tp/Texinfo/XS/parsetexi/def.c (next_bracketed_or_word_agg)
	(split_def_args, parse_def): remove code setting spaces_at_end on
	@def* lines, as it cannot happen anymore.  Remove use of spaces_at_end
	def line type.

	* tp/Texinfo/XS/parsetexi/def.c: remove unused next_bracketed_or_word
	function.

2022-12-06  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Transformations.pm (fill_gaps_in_sectioning): tree
	element added for new section more in line with current tree elements.

2022-12-06  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/ParserNonXS.pm (_end_line_starting_block): allow only
	one letter as @enumerate argument (same as XS parser).

2022-12-06  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/ParserNonXS.pm (_end_line_def_line),
	tp/Texinfo/XS/parsetexi/end_line.c (end_line_def_line)
	tp/Texinfo/Convert/TexinfoMarkup.pm (_convert),
	tp/Texinfo/Convert/TextContent.pm (_convert): isolate last space
	on @def* command line similarly to other formats with
	isolate_last_space.

	* tp/Texinfo/ParserNonXS.pm (_isolate_last_space): check that there
	is content before trying to isolate last space.

	* tp/Texinfo/ParserNonXS.pm (_merge_text, _end_line_def_line)
	(_end_line_starting_block, _process_remaining_on_line): improve/add
	debug messages.

2022-12-06  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Common.pm (_parent_string, debug_print_element_short)
	(debug_print_element): add an optional argument to
	debug_print_element_short to show the parent element name or type.

2022-12-05  Patrice Dumas  <pertusus@free.fr>

	* layout/list-of-tests: add layout formatting_info_disable_encoding
	test, testing Info output coverage with --disable-encoding.

2022-12-05  Patrice Dumas  <pertusus@free.fr>

	* doc/Makefile.am (TEXI2DVI, TEXI2DVI_ENVIRONMENT),
	doc/tp_api/Makefile.am (TEXI2DVI, TEXI2DVI_ENVIRONMENT): use in-source
	texindex and texi2dvi.

	* tp/Makefile.tres: update.

2022-12-04  Patrice Dumas  <pertusus@free.fr>

	* tp/t/57invalid_nestings.t: add tests of section command interrupting
	block command lines that requires gathering tree information,
	section_on_multitable_line, section_on_float_line,
	section_on_enumerate_line, section_on_xtable_line,
	and section_on_itemize_line.

2022-12-04  Patrice Dumas  <pertusus@free.fr>

	Gather tree information when closing incorrectly nested block command line

	* tp/Texinfo/ParserNonXS.pm (_close_current, _end_line_starting_block)
	(_end_line), tp/Texinfo/XS/parsetexi/close.c (close_current): when
	closing block_line_arg in close_current, use the same code as when
	closing at end of line, such as to gather all the information in the
	tree.

2022-12-04  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/tests/coverage,
	* tp/tests/coverage/list-of-tests,
	* tp/tests/coverage/formatting_utf8.texi: Remove.  list-of-tests
	only had one commented-out line.  formatting_utf8.texi was an
	old copy of layout/formatting.texi with an added
	"@documentencoding utf8" line.

2022-12-04  Patrice Dumas  <pertusus@free.fr>

	* util/texinfo.dtd: allow mixing *caption within float contents.  Fix
	email spaces attributes.

2022-12-04  Patrice Dumas  <pertusus@free.fr>

	* tp/t/converters_tests.t: add inlinefmtspaces, inlinerawspaces
	and inlineifsetifclearspaces, similar with other formatted tests but
	with soaces around arguments.

	* util/texinfo.dtd: fix the type of spaces attributes, @inline*
	arguments are optional.

2022-12-04  Gavin Smith  <gavinsmith0123@gmail.com>

	* doc/texinfo.texi (\pdflink) <XeTeX>: Fix definition.

2022-12-04  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/Texinfo/Convert/LaTeX.pm (_convert) <@verb>:
	Check \verb delimiter character is not used in contents,
	and change newlines to spaces.
	* tp/t/latex_tests.t (verb): New test.

2022-12-04  Gavin Smith  <gavinsmith0123@gmail.com>

	* doc/texinfo.tex (\verb): Turn off hyphenation as this can
	introduce spurious hyphen glyphs in the output.  Allow breaking
	at spaces by using \obeyspaces rather than \sepspaces.  Do not
	obey line breaks, for consistency with HTML output.  Report from
	Werner.

2022-12-03  Gavin Smith  <gavinsmith0123@gmail.com>

	* TODO: add @node and HTML splitting

2022-12-03  Gavin Smith  <gavinsmith0123@gmail.com>

	Atomic dir update

	* install-info/install-info.c (output_dirfile):
	If rename to dir file failed, try deleting target file
	and try again.  From Eli.

2022-12-03  Gavin Smith  <gavinsmith0123@gmail.com>

	Clickable section title in @contents for PDF

	* doc/texinfo.tex
	(\pdflinkpage): Generalise definition of \pdflink to take
	a link contents as well as a page number.
	(\iflinkentrytext): New conditional.
	(\startcontents): Set it.
	(\finishentry) [pdfTeX, XeTeX]: Use \pdflinkpage if \iflinkentrytext
	is true to allow clicking on the section title as well as the page
	number.

	(\shortchapentry, \shortunnchapentry, \dochapentry, \dosecentry,
	(\dosubsecentry, \dosubsubsecentry): Do not call \dopageno or
	\doshortpageno, as these surround the page number with TeX commands
	that get in the way in \pdflinkpage and appear to be unnecessary.
	(\dopageno, \doshortpageno): Remove.

2022-12-03  Patrice Dumas  <pertusus@free.fr>

	Gather tree information when closing incorrectly nested @def* lines

	* tp/Texinfo/ParserNonXS.pm (_close_current, _end_line_def_line)
	(_end_line), tp/Texinfo/XS/parsetexi/close.c (close_current),
	tp/Texinfo/XS/parsetexi/end_line.c (end_line_def_line, end_line):
	when ending a @def*x? command line because it was interrupted or
	at the end of the file, use the same code as the code used at the
	end of line, put in the end_line_def_line() function to gather
	information on the line and separate arguments with roles.

	* tp/t/57invalid_nestings.t: move section_on_defx_line to
	@formatted_cases.

2022-12-03  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/TexinfoMarkup.pm (_convert): ignore @def*
	arguments that have not been split off with a role added from the @def
	line args.

2022-12-03  Gavin Smith  <gavinsmith0123@gmail.com>

	Run gnulib-tool --add-import mkstemp.

2022-12-03  Gavin Smith  <gavinsmith0123@gmail.com>

	Atomic dir update

	* install-info/install-info.c (output_dirfile): Write to
	file created by mkstemp first, then rename this to the real
	output file. 
	* TODO: Remove item.

	Report from Pedrum Mohageri, bug-texinfo, November 2015.

2022-12-03  Gavin Smith  <gavinsmith0123@gmail.com>

	* doc/texinfo.texi (Directory Category), TODO: Do not refer
	to Free Software Directory categories.

2022-12-03  Gavin Smith  <gavinsmith0123@gmail.com>

	* configure.ac: Do not add js/node_modules/.bin/ to program
	search path if the directory does not exist.

2022-12-03  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/maintain/regenerate_file_lists.pl: Hardcode script name
	to be placed in Makefile.tres, so it will not change depending
	on where it was run from, e.g. from autogen.sh.

2022-12-03  Gavin Smith  <gavinsmith0123@gmail.com>

	* configure.ac, util/texi2pdf, js/info.js: bump version to 7.0dev.
	* README-hacking: remove duplicate instruction

2022-12-03  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/tests/run_parser_all.sh (post_process_output): Strip
	line with missing file error from logs for predictable results.

2022-12-03  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/texi2any.pl: Strip directories from filename in warning for
	predicatable results in test suite.

2022-12-03  Gavin Smith  <gavinsmith0123@gmail.com>

	* configure.ac (AM_INIT_AUTOMAKE): Remove dist-xz option for
	development as it is too slow.

2022-12-03  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/texi2any.pl: Give a warning if input filename ends in '.info'.
	* NEWS, TODO: Update.
	* tp/tests/formatting/list-of-tests (info_extension_warning):
	New test.

2022-12-02  Gavin Smith  <gavinsmith0123@gmail.com>

	* NEWS, doc/texinfo.texi (Heading Generation, @headings)
	(Custom Headings): Update now that @titlepage does not do
	"@headings on".

2022-12-02  Gavin Smith  <gavinsmith0123@gmail.com>

	Make texi2dvi -t '@headings double' work

	* doc/texinfo.tex (\setchapternewpage): Call \HEADINGSon as
	we are not relying on it being called inside @titlepage any more.

2022-12-02  Gavin Smith  <gavinsmith0123@gmail.com>

	Make texi2dvi -t '@headings double' work

	* doc/texinfo.tex: Call \HEADINGSon to set headings from very start
	of file.
	(\titlepage): Call \headingsoff to turn off headings temporarily.
	Do not call \HEADINGSon as this may override a
	texi2dvi -t '@headings double' setting.  Reset page number with
	\pageone.

2022-12-02  Gavin Smith  <gavinsmith0123@gmail.com>

	* info/window.h: Eliminate #define used to use the same three fields
	in two different structures, as the comment explaining it took
	more space up than it would have taken simply to write the lines
	twice.

2022-12-02  Gavin Smith  <gavinsmith0123@gmail.com>

	* info/session.c (info_beginning_of_line): Avoid freezing
	at beginning of a file when 'nodeline' is set to 'pointers' (the
	default).  Report from Justin Anthony LaPolla <justin.lapolla@hpe.com>.

2022-12-02  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/TexinfoMarkup.pm (_format_columnfractions)
	(_convert): add a separate function to format columnfractions command,
	_format_columnfractions().  Use that function to format a bogus
	@columnfractions out of @multitable.

2022-12-01  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/TexinfoMarkup.pm (_convert), util/txixml2texi.pl,
	util/texinfo.dtd: use spacesaftercmd attribute for
	spaces_after_cmd_before_arg for accent commands too.

	* util/texinfo.dtd: add two-letter based index entries index commands.
	Add microtype.  Allow formfeed and verticaltab in menuleadingtext.
	Allow headingmark in style commands.  Add diverse space attributes in
	associated elements, in particular in brace commands.

2022-12-01  Patrice Dumas  <pertusus@free.fr>

	Protect spaces in space attributes in XML specific code

	* tp/Texinfo/Convert/TexinfoMarkup.pm,
	tp/Texinfo/Convert/TexinfoXML.pm (_xml_attributes): protect spaces
	in space attributes in format specific code.

2022-11-30  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/TexinfoMarkup.pm (_convert),
	tp/Texinfo/Convert/TexinfoXML.pm (_xml_attributes),
	util/txixml2texi.pl (unprotect_spaces): add attribute for
	spaces_after_cmd_before_arg info, protect special spaces in it
	and unprotect in txixml2texi.pl.

2022-11-30  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/TexinfoMarkup.pm (_convert): add end lines
	after the closing markup element when @end is missing.

2022-11-30  Patrice Dumas  <pertusus@free.fr>

	Gather tree information when closing incorrectly nested line command

	* tp/Texinfo/ParserNonXS.pm (_close_current, _end_line_misc_line)
	(_end_line), tp/Texinfo/XS/parsetexi/close.c (close_current),
	tp/Texinfo/XS/parsetexi/end_line.c: when closing line_arg in
	close_current, use the same code as when closing at end of line,
	such as to gather all the information in the tree, in particular
	rearranging @end in block command and output all the error messages.

2022-11-30  Gavin Smith  <gavinsmith0123@gmail.com>

	* configure.ac (AM_INIT_AUTOMAKE): Remove 'readme-alpha' option,
	as we are using three-part version numbers that do not signify
	alpha releases.

2022-11-30  Gavin Smith  <gavinsmith0123@gmail.com>

	* NEWS: Add 7.0.1 news.

2022-11-29  Per Bothner  <per@bothner.com>

	* js/info.css (cache_index_links): Fix index entry processing.
	Also implement subentry handling.
	(init_iframe - on_load): Change search and call of cache_index_links.

2022-11-29  Per Bothner  <per@bothner.com>

	* js/info.css (.tex-input): Make input element a bit wider.
	This works better for longer index or menu names.

2022-11-29  Patrice Dumas  <pertusus@free.fr>

	* tp/t/test_utils.pl (output_texi_file): always add a newline in the
	end of the test Texinfo code.

2022-11-29  Patrice Dumas  <pertusus@free.fr>

	* util/txixml2texi.pl: avoid double comment for line specific command.

2022-11-28  Patrice Dumas  <pertusus@free.fr>

	Protect vertical tab in XML

	* tp/Texinfo/Convert/TexinfoMarkup.pm
	(_protect_in_spaces_attribute_text), tp/Texinfo/Convert/TexinfoXML.pm
	(_xml_attributes, _protect_text), util/txixml2texi.pl,
	util/texinfo.dtd: protect vertical tab U+000B as \v in attributes and
	with verticaltab added entities in other contexts.

2022-11-28  Patrice Dumas  <pertusus@free.fr>

	XML menu leading text and menu separator in elements instead of attributes

	* tp/Texinfo/Convert/TexinfoMarkup.pm (%type_elements, _convert),
	util/texinfo.dtd: put menu_entry_leading_text and menu_entry_separator
	types text in element rather than in attributes.  It is better to keep
	the structure and protect spaces more naturally.

	* util/texinfo.dtd: add endspace attribute for macro and rmacro.


2022-11-27  Per Bothner  <per@bothner.com>

	* js/info.js (on_link): Change query pattern for links.
	Use class printindex-index-section instead of printindex-index-entry
	to get the correct node URL.

2022-11-27  Per Bothner  <per@bothner.com>

	* js/info.js (set_current)url): Don't set parameter default.
	It's not needed, and it triggers an eslint complaint,
	because parameter default values were new in EcmaScript 6 (2015).

2022-11-27  Patrice Dumas  <pertusus@free.fr>

	* maintain/check_back_xml_forth_texi_t.sh: script to test conversion
	of tp/t/*.t Texinfo code to Texinfo XML and back to Texinfo to detect
	issues with Texinfo XML conversion and conversion back to Texinfo.

2022-11-27  Patrice Dumas  <pertusus@free.fr>

	* util/txixml2texi.pl: skip a comment after <columnfractions> as
	the comment is already in the line attribute.

2022-11-27  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/TexinfoMarkup.pm (_convert): do not have
	an empty columnprototypes when there is an empty columnfraction,
	but only have a columnfraction.
	Avoid autovivification of extra columnfraction in case of empty
	columnfraction.

2022-11-27  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/TexinfoMarkup.pm (_convert): correctly use
	_leading_spaces_arg return in case there is no space after @end
	command line and something else on the line.

2022-11-27  Patrice Dumas  <pertusus@free.fr>

	* tp/t/test_utils.pl (output_texi_file): encode to UTF-8 the resulting
	Texinfo file.  Only when the test texinfo comes from perl code and not
	when reading from a file as when reading from a file there is no
	decoding.

2022-11-27  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/ParserNonXS.pm (_gather_previous_item),
	tp/Texinfo/XS/parsetexi/multitable.c (gather_previous_item):
	Reparent trailing comments from before_item to table_term.

2022-11-27  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/tests/coverage_macro.texi: Readd removed content.  From
	Patrice.

2022-11-27  Gavin Smith  <gavinsmith0123@gmail.com>

	@itemx at beginning of table is an error

	* tp/Texinfo/ParserNonXS.pm (gather_previous_item),
	* tp/Texinfo/XS/parsetexi/multitable.c (gather_previous_item),
	NEWS: @itemx at beginning of table is an error, not a warning,
	as with recent changes this gives invalid HTML and DocBook output.
	Suggestion from Patrice.

2022-11-26  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Common.pm (%default_converter_customization): update
	TEXINFO_DTD_VERSION to 7.1 to check more easily that tests are
	valid.

2022-11-26  Patrice Dumas  <pertusus@free.fr>

	* util/texinfo.dtd, configure.ac (TEXINFO_DTD_VERSION): add the
	index entries in tableterm before the @item.

2022-11-26  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/DocBook.pm (_convert): output <term> when
	table_term container is seen and not for @item, to also enclose
	index entries in table_term before the @item (same as in html).

2022-11-26  Gavin Smith  <gavinsmith0123@gmail.com>

	* doc/texinfo.texi: Move index commands before @item in @table
	throughout.

2022-11-26  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/Texinfo/ParserNonXS.pm (gather_previous_item),
	* tp/Texinfo/XS/parsetexi/multitable.c (gather_previous_item):
	Reparent trailing index commands from before_item to table_term.

2022-11-26  Gavin Smith  <gavinsmith0123@gmail.com>

	Remove relate_index_entries_to_table_entries_in_tree

	* tp/Texinfo/Common.pm (texinfo_special_joint_transformation)
	(relate_index_entries_to_table_entries_in_tree): Remove.
	* tp/texi2any.pl: Do not use relate_index_entries_to_table_entries
	transformation for HTML or LaTeX.

2022-11-26  Patrice Dumas  <pertusus@free.fr>

	* doc/tp_api/Makefile.am (MAKEINFO): add -I $(top_builddir)/tp/
	to find Texinfo::ModulePath in out-of-source builds.  Report
	from Arsen Arsenović.

2022-11-26  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (_convert_table_term_type): add the
	<dt> in front in _convert_table_term_type.  Remove
	_open_table_term_type.

2022-11-26  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/Texinfo/ParserNonXS.pm (gather_previous_item),
	* tp/Texinfo/XS/parsetexi/multitable.c (gather_previous_item):
	Leave trailing index entries if no command follows.
	* tp/t/22xtable.t (index_command_before_end_table): New test.

2022-11-26  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/t/22xtable.t (inter_item_commands_in_table): Move test
	here of @cindex directly between @item and @itemx.
	* tp/tests/coverage_macro.texi: Remove cases tested in t/22xtable.t.

2022-11-26  Gavin Smith  <gavinsmith0123@gmail.com>

	Output index anchors inside <dt>

	* tp/Texinfo/ParserNonXS.pm (gather_previous_item),
	* tp/Texinfo/XS/parsetexi/multitable.c (gather_previous_item):
	Do not absorb trailing index entries into a table_definition element.

	* tp/Texinfo/Convert/HTML.pm
	(_open_table_term_type): New function simply to output <dt>.  Add
	it to %default_types_open for 'table_term'.
	(_convert_table_term_type): Dummy function to enable
	_open_table_term_type.
	(_convert) <open type>: Concatenate any result from an "open type"
	handler rather than overwriting it.
	(_convert_item_command): Do not output '<dt>' for @item, as
	_open_table_term_type did this.  Output any index anchor immediately
	after the <dt> as an <a> element rather than setting an 'id' attribute
	on the <dt> tag.

2022-11-26  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/Texinfo/ParserNonXS.pm (gather_previous_item):
	Use splice operation instead of moving items one by one when
	creating table_term element.  No functional changes intended.

2022-11-25  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/Texinfo/ParserNonXS.pm (gather_previous_item),
	* tp/Texindo/XS/parsetexi/element_types.txt:
	Rename 'table_item' to 'table_definition'.

2022-11-25  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/Texinfo/ParserNonXS.pm (_gather_previous_item),
	* tp/Texinfo/XS/parsetexi/multitable.c (gather_previous_item).
	* tp/Texinfo/Common.pm (_relate_index_entry_to_table_entry):
	Revert last change.

2022-11-22  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/Texinfo/ParserNonXS.pm (_gather_previous_item),
	* tp/Texinfo/XS/parsetexi/multitable.c (gather_previous_item):
	Include index entries in table_term element.
	* tp/Texinfo/Common.pm (_relate_index_entry_to_table_entry):
	Look for index command in table_term rather than table_item.

2022-11-22  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (command_text, _convert_xref_commands)
	(_initialize_output_state): add 'referred_command_stack' to put
	commands that can be referred to being expanded, to catch if an @*ref
	refers to that command during the expansion, leading to an infinite
	recursion.  In that case, use the node instead of the section, as with
	nodes only it is not possible to construct a an infinite recursion
	as the node must both be a reference target and refer to a specific
	target at the same time, which is not possible.  Report from David
	Bacon.

2022-11-21  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (_convert_printindex_command): do not add
	an empty cell on the letter row.  That way it is possible to add
	a colspan or have only one cell.

2022-11-21  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/Texinfo/ParserNonXS.pm (_gather_previous_item):
	Splice end of contents array instead of unshifting items from
	end one at a time.  No functional changes intended.  This should
	make it simpler to work forwards and find index commands
	immediately following @item and/or @itemx.

2022-11-20  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (_convert_printindex_command): remove
	span element used for index-entry-level-*, instead add the class to
	the td element.
	Remove classes for empty sectioning cells.
	Report from Per Bothner.

2022-11-20  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (output): create empty js files for
	tests.

2022-11-20  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/tests/layout/list-of-tests (formatting_epub_nodes):
	Set INFO_JS_DIR in order to exercise code.  From Patrice.

2022-11-20  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/Texinfo/Convert/HTML.pm (output) <INFO_JS_DIR>:
	Do not copy js files for tests.

2022-11-20  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (%css_element_class_styles): increase
	index subentries indenting.  Suggestion from Raymond Toy.

2022-11-20  Gavin Smith  <gavinsmith0123@gmail.com>

	* js/info.js (on_load): Update version number.

2022-11-20  Gavin Smith  <gavinsmith0123@gmail.com>

	* README-hacking: info.js needs version update

2022-11-20  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/tests/layout/list-of-tests (formatting_epub_nodes):
	Do not set INFO_JS_DIR to avoid test result having to be
	updated every time one of the js files changes.

2022-11-20  Patrice Dumas  <pertusus@free.fr>

	* tp/DebugTexinfo/DebugTree.pm (_print_tree): use info element key
	instead of extra for information now associated to that key.

2022-11-20  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (output_internal_links): add subentries
	to index entries text.

2022-11-20  Gavin Smith  <gavinsmith0123@gmail.com>

	info.js improvements

	* js/info.css: No underlining for sidebar links.
	* js/info.js: Remove "Hide sidebar" text as it takes up too much
	space.

2022-11-20  Gavin Smith  <gavinsmith0123@gmail.com>

	* js/info.js (add_header): Check for h1.top after h1.settitle
	for text to put at top of sidebar.

2022-11-20  Gavin Smith  <gavinsmith0123@gmail.com>

	* js/info.js (init_iframe): Change selector for index entries
	to match new HTML output.  From Per and Patrice.

2022-11-20  Gavin Smith  <gavinsmith0123@gmail.com>

	* README-hacking: say to test JS interface manually before a release
	* README: list js/ directory here.

2022-11-20  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/Texinfo/Convert/HTML.pm (%defaults): Change INDEX_ENTRY_COLON
	from ':' to ''.  Suggestion from Patrice.

2022-11-18  Gavin Smith  <gavinsmith0123@gmail.com>

	* contrib/my-bib-macros.texi: Move here from web pages.

2022-11-19  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (_convert_printindex_command): use
	padding in CSS instead of non breaking space in a column to add
	a space between index entry and section or node in printindex HTML
	formatting.  Report from Per Bothner.

2022-11-19  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/Converter.pm (comma_index_subentries_tree),
	tp/Texinfo/Convert/HTML.pm (_prepare_index_entries): use subentries
	to determine the identifier of an index entry.  Add an optional
	separator argument to comma_index_subentries_tree() to be able to
	use something else than a comma.  Use a space separator to determine
	the identifier to keep it shorter.

2022-11-19  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (%css_element_class_styles): use
	padding-left instead of margin-left for index-entry-level-*, it
	is more appropriate.  Report from Per Bothner.

2022-11-19  Patrice Dumas  <pertusus@free.fr>

	* po_document/Makevars (XGETTEXT_OPTIONS): add --from-code=UTF-8
	for an non-ASCII encoded character in a comment in tp/ext/epub3.pm.
	Update po files.

2022-11-19  Patrice Dumas  <pertusus@free.fr>

	Add Pod/Simple/Texinfo.pm HTML output to wwwdoc

	* doc/Makefile.am (wwwdoc-build, wwwdoc-install): add
	Pod/Simple/Texinfo.pm HTML output, link Pod/Simple/Texinfo.pm and call
	pod2html such that a relative link to Pod/Simple/Texinfo.html is
	actually output.

2022-11-19  Patrice Dumas  <pertusus@free.fr>

	* doc/Makefile.am (po-check, po_document-check), README-hacking,
	po_document/POTFILES.in, tp/Texinfo/ParserNonXS.pm: add __p to
	po-check regexp, remove gdt.  Add po_document-check target similar
	to po-check for po_document/POTFILES.in.  Update po_document/POTFILES.in
	with the files found.
	In ParserNonXS.pm, add a useless $self argument to gdt( in comment to
	avoid getting caught in po_document-check.

2022-11-18  Gavin Smith  <gavinsmith0123@gmail.com>

	* doc/Makefile.am (wwwdoc-build): Pass --quiet flag to pod2html.

2022-11-18  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/Converter.pm, tp/Texinfo/Convert/Texinfo.pm,
	tp/Texinfo/Convert/TexinfoMarkup.pm, tp/Texinfo/ParserNonXS.pm
	(_isolate_last_space), tp/Texinfo/Transformations.pm,
	tp/Texinfo/XS/parsetexi/extra.c (add_info_element_oot),
	tp/Texinfo/XS/parsetexi/parser.c (isolate_last_space): move
	comment_at_end from extra to info in element.

2022-11-17  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/Texinfo.pm, tp/Texinfo/Convert/TexinfoMarkup.pm,
	tp/Texinfo/ParserNonXS.pm (_process_remaining_on_line),
	tp/Texinfo/XS/parsetexi/element_types.txt,
	tp/Texinfo/XS/parsetexi/extra.c (add_info_string),
	tp/Texinfo/XS/parsetexi/parser.c (process_remaining_on_line): rename
	spaces type used for spaces after command before argument or opening
	brace as spaces_after_cmd_before_arg and move it to info in element.

2022-11-17  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/Texinfo.pm (_expand_cmd_args_to_texi): remove
	redundant conditions.

2022-11-17  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/LaTeX.pm, tp/Texinfo/Convert/Texinfo.pm,
	tp/Texinfo/Convert/TexinfoMarkup.pm, tp/Texinfo/ParserNonXS.pm
	(_parse_macro_command_line, _close_brace_command)
	(_process_remaining_on_line), tp/Texinfo/XS/parsetexi/close.c
	(close_brace_command), tp/Texinfo/XS/parsetexi/convert.c
	(expand_cmd_args_to_texi), tp/Texinfo/XS/parsetexi/handle_commands.c
	(handle_line_command), tp/Texinfo/XS/parsetexi/macro.c
	(parse_macro_command_line), tp/Texinfo/XS/parsetexi/parser.c
	(process_remaining_on_line), tp/Texinfo/XS/parsetexi/separator.c
	(handle_open_brace): move arg_line and @verb delimiter from extra to
	info in element.

2022-11-17  Gavin Smith  <gavinsmith0123@gmail.com>

	* info/t/recode-C-locale.sh: New test.

2022-11-17  Gavin Smith  <gavinsmith0123@gmail.com>

	* info/util.c (text_buffer_iconv): Avoid infinite loop
	by updating space left argument passed to iconv, and by
	continually expanding the allocated space in the output buffer
	if iconv continues to return E2BIG.
	Hang on UTF-8 encoded file with LC_ALL=C reported by
	Hilmar Preuße <hille42@web.de>.

2022-11-16  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/Converter.pm, tp/Texinfo/Convert/Texinfo.pm,
	tp/Texinfo/Convert/TexinfoMarkup.pm,
	tp/Texinfo/Convert/TextContent.pm, tp/Texinfo/ParserNonXS.pm,
	tp/Texinfo/Structuring.pm, tp/Texinfo/XS/misc.c (xs_abort_empty_line),
	tp/Texinfo/XS/parsetexi/convert.c (expand_cmd_args_to_texi)
	(convert_to_texinfo_internal),
	tp/Texinfo/XS/parsetexi/handle_commands.c (handle_line_command),
	tp/Texinfo/XS/parsetexi/parser.c (abort_empty_line)
	(isolate_last_space_internal): move spaces_before_argument and
	spaces_after_argument from extra to info key element hash.

	* tp/Texinfo/XS/parsetexi/extra.c (lookup_associated_info)
	(lookup_extra, lookup_info): add lookup_associated_info to lookup in
	an associated information structure.  Add wrappers for the info and
	extra structures.

	* tp/Texinfo/Convert/DocBook.pm (_convert): check 'args' and not
	'extra' to determine if there is a @quotation argument.

	* tp/Texinfo/ParserNonXS.pm (_end_line): remove extra element key if
	empty after removing incorrect command_as_argument.  Avoid
	autovivification.

2022-11-15  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm, tp/Texinfo/Convert/LaTeX.pm,
	tp/Texinfo/Convert/Plaintext.pm, tp/Texinfo/Convert/Plaintext.pm,
	tp/Texinfo/ParserNonXS.pm (_process_remaining_on_line),
	tp/Texinfo/XS/parsetexi/api.c (element_to_perl_hash),
	tp/Texinfo/XS/parsetexi/end_line.c (end_line_starting_block),
	tp/Texinfo/XS/parsetexi/extra.c (add_info_string_dup),
	tp/Texinfo/XS/parsetexi/parser.c (process_remaining_on_line),
	tp/Texinfo/XS/parsetexi/tree.c (new_element, destroy_element):
	add an info hash to the tree elements, for information that can not
	be retrieved from the tree.  As a first information moved from
	extra to info, put the @value flag name for @value with unset flag.

2022-11-15  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/XS/parsetexi/api.c (store_additional_info)
	(element_to_perl_hash), tp/Texinfo/XS/parsetexi/end_line.c
	(end_line_starting_block), tp/Texinfo/XS/parsetexi/extra.c
	(add_associated_info_key, lookup_extra),
	tp/Texinfo/XS/parsetexi/tree.c (new_associated_info, new_element)
	(destroy_associated_info, destroy_element),
	tp/Texinfo/XS/parsetexi/tree_types.h (ASSOCIATED_INFO): instead of
	putting the extra array, the number and space directly in the
	element, use a specific structure, ASSOCIATED_INFO to hold those
	three fields.  Replace add_extra_key by add_associated_info_key
	to associate information.  Add initialization, destruction,
	lookup based on the previous code associated to extra.

2022-11-15  Gavin Smith  <gavinsmith0123@gmail.com>

	* configure.ac: Use absolute path for checking for
	npm commands so that rules in js/Makefile.am work.

2022-11-15  Gavin Smith  <gavinsmith0123@gmail.com>

	* js/yarn.lock, js/server.js: Remove files.

2022-11-14  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/Texinfo.pm (root_heading_command_to_texinfo):
	show node name as it appeared in the document.

2022-11-14  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (special_element_info)
	(_set_root_commands_targets_node_files)
	(_prepare_conversion_tree_units), tp/Texinfo/Translations.pm
	(complete_indices): sort for reproducible function returns
	and messages.

	* tp/Texinfo/Convert/Converter.pm, tp/Texinfo/Convert/HTML.pm,
	tp/Texinfo/Structuring.pm: avoid perl objects in debug messages,
	keeping the perl object name output messages in comments.

	* tp/Texinfo/Convert/HTML.pm (converter_initialize): avoid
	autovivification.

2022-11-14  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/XS/parsetexi/command_data.awk: remove code for
	compatibility with old format.

2022-11-14  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Commands.pod, tp/Texinfo/Common.pm
	(_add_preamble_before_content),
	tp/Texinfo/XS/parsetexi/command_data.awk, tp/Texinfo/command_data.txt:
	add preamble flag in command_data.txt instead of determining the hash
	in Texinfo::Common.

2022-11-14  Patrice Dumas  <pertusus@free.fr>

	* Pod-Simple-Texinfo/lib/Pod/Simple/Texinfo.pm
	(_texinfo_handle_element_start, _texinfo_handle_element_end): use
	Texinfo::Commands::brace_code_commands.

2022-11-14  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/ParserNonXS.pm: do not reset simple_text_commands and
	plain_text_commands to full_text_commands.

	Add a check (not enabled) that all the commands that should have
	nesting checks do.

2022-11-14  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Commands.pod, tp/Texinfo/Common.pm,
	tp/Texinfo/XS/parsetexi/command_data.awk, tp/Texinfo/command_data.txt:
	move command classification out of Texinfo::Common to
	command_data.txt.  Filter out flags not relevant for the XS parser
	when generating command_data.c.
	Update callers.

2022-11-13  Patrice Dumas  <pertusus@free.fr>

	* tp/Makefile.am (EXTRA_DIST), tp/Texinfo/XS/Makefile.am,
	tp/Texinfo/command_data.txt: move command_data.txt from
	tp/Texinfo/XS/ to tp/Texinfo/ since it is now used both in perl
	modules and in the XS parser.

2022-11-13  Patrice Dumas  <pertusus@free.fr>

	* tp/Makefile.am (test_files): add t/init/*.pm files.

2022-11-13  Patrice Dumas  <pertusus@free.fr>

	* util/texi2dvi (--expand): add --iftex and --no-ifinfo to
	makeinfo call.  Use -c TEXINFO_OUTPUT_FORMAT=plaintexinfo
	instead of --macro-expand=- to avoid the conversion to Info
	that could lead to irrelevant messages.

	* doc/texinfo.texi (Format with @command{texi2dvi} or
	@command{texi2pdf}): no more comments set by texi2dvi.

2022-11-13  Gavin Smith  <gavinsmith0123@gmail.com>

	* util/texi2dvi (--expand): Remove lengthy block of code
	using sed to comment out @tex blocks.  Suggestion from Patrice.
	* NEWS, TODO, README-hacking: update

2022-11-12  Werner Lemberg  <wl@gnu.org>

	* doc/texinfo.tex (\unicodechardefs): Add missing % after }.

2022-11-12  Werner Lemberg  <wl@gnu.org>

	* doc/texinfo.tex (\textdegree): Define using \tcfont to
	enable copying the right character from a PDF reader.

2022-11-12  Patrice Dumas  <pertusus@free.fr>

	* util/htmlxref.cnf: add manuals, in particular mono manuals
	and fix some issues with existing manuals. Report from Tzvetelin
	Katchov.
	Rename mairix manual as mairix-el, and smalltalk* manuals as
	gst*.

2022-11-12  Gavin Smith  <gavinsmith0123@gmail.com>

	* doc/texinfo.texi (\defmacro): Use \begingroup and
	\endgroup around code reading macro arguments, instead
	of \bgroup and \egroup, as the former do not form a
	"subformula" when used in math mode, which affects the
	spacing.  Suggestion from Vincent Lefèvre.

2022-11-12  Gavin Smith  <gavinsmith0123@gmail.com>

	* doc/gendocs.chapter/gendocs_template: New file.
	* doc/Makefile.am (wwwdoc-build): Use it for texi2any_internals
	manual, as default template does not handle chapter-split
	manuals.

2022-11-12  Patrice Dumas  <pertusus@free.fr>

	* doc/texinfo.texi (HTML Xref 8-bit Character Expansion):
	update codepoint in example of Xref with @point.

2022-11-12  Patrice Dumas  <pertusus@free.fr>

	Use U+22C6 for @point to get a smaller and more pointy star

	* NEWS, doc/texinfo.texi (HTML Xref Command Expansion),
	tp/Texinfo/Convert/Unicode.pm (%extra_unicode_map),
	tp/tests/coverage_macro.texi: use U+22C6 for @point both
	to get a star more in line with the star obtained with TeX
	also more similar to the asterisk also used, more pointy.
	This changes the HTML corss-references to nodes with @point.

2022-11-12  Gavin Smith  <gavinsmith0123@gmail.com>

	* util/htmlxref.cnf (texi2any_internals): Remove node line
	to prefer split-by-chapter.

2022-11-12  Gavin Smith  <gavinsmith0123@gmail.com>

	* doc/Makefile.am (wwwdoc-build): Split texi2any_internals
	by chapter.  Report from Patrice.  Suppress Info node name
	warnings for texi2any_api and texi2any_internals.

2022-11-12  Gavin Smith  <gavinsmith0123@gmail.com>

	* util/htmlxref.cnf (texi2any_internals): Add split-by-chapter
	line.  Report from Patrice.

2022-11-12  Gavin Smith  <gavinsmith0123@gmail.com>

	* README-hacking: remove to-do item

2022-11-12  Gavin Smith  <gavinsmith0123@gmail.com>

	* README-hacking: collect info on version update.  texi2dvi
	and texi2pdf uploads needed after version update.

2022-11-12  Gavin Smith  <gavinsmith0123@gmail.com>

	* README-hacking, texindex/ti.twjr: Update year reported
	by texindex --version.

2022-11-12  Gavin Smith  <gavinsmith0123@gmail.com>

	* doc/texinfo.tex (\textdegree, \unicodechardefs): Supply definition
	that looks better in a tt font.  Also work inside math.  Report from
	Werner.

2022-11-12  Gavin Smith  <gavinsmith0123@gmail.com>

	* NEWS: correct spelling of "@definfoenclose" in most
	recent release announcement

2022-11-12  Gavin Smith  <gavinsmith0123@gmail.com>

	* doc/texinfo.texi (Macro Details): Add problem with macro
	expansion inside of @math.  Report from Vincent Lefèvre.

2022-11-11  Gavin Smith  <gavinsmith0123@gmail.com>

	* doc/texinfo.tex (\unicodechardefs): Use \arrow instead of
	\expansion for U+2192.  From Patrice.

2022-11-11  Patrice Dumas  <pertusus@free.fr>

	* tp/tests/coverage_macro.texi: add UTF-8 encoded characters near to
	accented characters obtained with @-commands.

2022-11-11  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Common.pm (%preamble_commands): fix typo on direntry
	command name.

	* tp/tests/layout/formatting.texi: add @latex \DeclareUnicodeCharacter
	for characters not in the default inputenc/fontenc.

2022-11-11  Patrice Dumas  <pertusus@free.fr>

	* tp/tests/coverage_macro.texi: add UTF-8 encoded characters near to
	@-commands to be able to check visually the difference in formatting.

2022-11-10  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/Texinfo/Common.pm, tp/Texinfo/Convert/HTML.pm,
	tp/Texinfo/Convert/Utils.pm, tp/Texinfo/Translations.pm: edits
	translation comments for grammar.

	Update po files.

2022-11-10  Patrice Dumas  <pertusus@free.fr>

	* doc/texi2any_api.texi (Translation Contexts): edit.

2022-11-10  Patrice Dumas  <pertusus@free.fr>

	* doc/texi2any_api.texi (Translations Output and Customization):
	translated strings can also be specified for specific elements
	headings customization, refer to the node.

2022-11-10  Patrice Dumas  <pertusus@free.fr>

	* doc/texi2any_api.texi (Customizing Footnotes@comma{} Tables of
	Contents and About, Special Element Body Formatting Functions):
	merge 'Common Customization of Special Elements' in 'Customizing
	Footnotes@comma{} Tables of Contents and About'.

2022-11-09  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (_convert_printindex_command): put
	hyperlink within span used for indentation of subentries.

2022-11-09  Gavin Smith  <gavinsmith0123@gmail.com>

	* configure.ac (AM_INIT_AUTOMAKE): Increase required automake
	version to 1.16.2.  From Patrice.

2022-11-09  Patrice Dumas  <pertusus@free.fr>

	* doc/texi2any_api.texi (Translation Contexts),
	tp/Texinfo/Convert/HTML.pm (%direction_type_translation_context)
	(direction_string, special_element_info): add translation contexts
	for direction strings and special elements headings.

	* tp/Texinfo/Translations.pm (pgdt): find gdt() through the
	first argument object.

2022-11-09  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm, tp/Texinfo/Convert/LaTeX.pm,
	tp/Texinfo/Convert/Plaintext.pm, tp/Texinfo/Convert/Utils.pm: add
	comments for translators.

	Update po files.

2022-11-09  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/Converter.pm (float_name_caption): remove useless
	end of lines in translated strings.  Add comments for translators.

	Update po files.

2022-11-08  Patrice Dumas  <pertusus@free.fr>

	* po_document/Makevars (XGETTEXT_OPTIONS): update pgdt order.

	* tp/Texinfo/Translations.pm (complete_indices): use '{name} of {class}'
	for index entry for @defcv too.

	Update po files.

2022-11-08  Patrice Dumas  <pertusus@free.fr>

	* po_document/Makevars (XGETTEXT_OPTIONS): add -cTRANSLATORS

	* tp/Texinfo/Common.pm (%def_map): add either a # TRANSLATORS:
	comment, or use pgdt to give context.  Use pgdt when the same string
	is used for different @-commands.
	Update test results as some translations are missing after getting
	a context.

2022-11-08  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Report.pm (line_warn, document_warn), tp/texi2any.pl
	(document_warn): remove \n from translated string marked for
	translation with __p.

2022-11-08  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/IXIN.pm, tp/Texinfo/Convert/TexinfoMarkup.pm,
	tp/Texinfo/Convert/Utils.pm: convert only if contents are defined,
	initialize contents if needed.

2022-11-08  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/LaTeX.pm (_prepare_conversion, _title_font)
	(_convert): convert only if contents are defined.

2022-11-08  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/Converter.pm (sort_element_counts): use
	node name only if set.
	Add a space between sectioning command and @-command and name.

	* tp/texi2any.pl: fix SORT_ELEMENT_COUNT by requiring the correct
	module.

2022-11-08  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/DocBook.pm (_convert): avoid formatting when
	contents is not set.

	* tp/Texinfo/Convert/Converter.pm (table_item_content_tree):
	explicitely handle undef $contents argument.

2022-11-08  Gavin Smith  <gavinsmith0123@gmail.com>

	* doc/texinfo.texi (Adding Output Formats): Update name of
	texi2any_internals manual.
	* util/htmlxref.cnf: Add texi2any_api, texi2any_internals.

2022-11-08  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm: avoid formatting when contents
	is not set, avoiding a crash with empty @titlefont as title.

	* tp/Texinfo/Convert/Plaintext.pm (_convert): do not format
	author if there is no contents, this cannot happen for now but is more
	robust.

2022-11-08  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/Info.pm (_convert): avoid crashes in case
	of empty arguments.

2022-11-08  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/Info.pm (format_image): avoid crash on empty
	@image extension.  Report from Werner Lemberg.

2022-11-08  Gavin Smith  <gavinsmith0123@gmail.com>

	* tp/texi2any.pl: Call _encode_message on messages passed to
	"die" to avoid "Wide character in die" warning.  Report from
	Werner.

2022-11-05  Patrice Dumas  <pertusus@free.fr>

	Do not use FirstInFile in direction strings, document FirstInFile

	* tp/Texinfo/Convert/HTML.pm (direction_string): strip leading
	FirstInFile from direction when looking for the associated strings.

	* doc/texi2any_api.texi (Directions, Direction Strings): document
	directions with FirstInFile prepended.

2022-11-05  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Structuring.pm (check_nodes_are_referenced): consider
	that a node is referenced if it appears in a manu that would be
	setup automatically.  That is if a node has automatic direction,
	no menu, all the children determined by automatic directions are
	considered to be referenced.
	(get_node_node_childs_from_sectioning): avoid spurious
	auto-vivification.

2022-11-04  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Common.pm (pgdt): add pgdt that does nothing to
	be able to marks translated strings with a translation context.

2022-11-04  Patrice Dumas  <pertusus@free.fr>

	* NEWS: update with @subentry, @seealso and @seeentry formatting
	in HTML.

2022-11-04  Patrice Dumas  <pertusus@free.fr>

	Format index entry with @seealso or @seeentry in HTML

	* tp/Texinfo/Convert/HTML.pm (_convert_printindex_command):
	format entry with @seealso or @seeentry similarly with Texinfo
	TeX.

2022-11-04  Patrice Dumas  <pertusus@free.fr>

	Format @subentry in HTML similarly as in printed output

	* tp/Texinfo/Convert/Converter.pm (comma_index_subentries_tree),
	tp/Texinfo/Convert/HTML.pm (_convert_printindex_command):
	pass directly the first element with a possible subentry to
	comma_index_subentries_tree to be able to start frmo a subentry, not
	only from the main entry.
	Format subentries in HTML by indenting and not redoing the formatting
	of previous lines first levels, similar with Texinfo TeX.

2022-11-03  Patrice Dumas  <pertusus@free.fr>

	Also use subentries for index entries sorting in texi2any

	* tp/Texinfo/Structuring.pm (_sort_index_entries, sort_indices):
	collect subentries sorting keys and use them to sort the index
	entries.

2022-11-03  Patrice Dumas  <pertusus@free.fr>

	* doc/texi2any_api.texi (Simple Customization for Commands Without
	Arguments), tp/Texinfo/Config.pm
	(texinfo_register_no_arg_command_formatting),
	tp/Texinfo/Convert/HTML.pm (_translate_names): allow to set
	a Texinfo code to be translated and converted as command without
	arguments output.

2022-11-02  Patrice Dumas  <pertusus@free.fr>

	* doc/texi2any_api.texi (Simple Navigation Panel Customization):
	describe ACTIVE_ICONS and PASSIVE_ICONS more explicitely.

2022-11-02  Patrice Dumas  <pertusus@free.fr>

	* doc/texi2any_api.texi (Simple Navigation Panel Customization):
	add CHAPTER_FOOTER_BUTTONS, update explanations.

2022-11-01  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/LaTeX.pm (%LaTeX_encoding_names_map)
	(_latex_header): associate both a fontenc and an inputenc to
	an encoding.
	Separate the 'fixed' part of the LaTeX use package part of preamble at
	the beginning, including inputenc and fontenc and the usepackage
	lines determined by the use of Texinfo commands.

2022-11-01  Patrice Dumas  <pertusus@free.fr>

	* doc/texinfo.texi (@command{texi2html}): update now that translated
	strings customization is done.

	* doc/texi2oldapi.texi: update to expand history to the point where
	the texi2html implementation was abandonned.  Mark that the part on
	the early texi2any API has been obsoleted by texi2any_api.

2022-11-01  Patrice Dumas  <pertusus@free.fr>

	* doc/texi2any_api.texi (Common Customization of Special Elements)
	(Special Elements Information Customization)
	(Special Element Body Formatting Functions), tp/Texinfo/Common.pm
	(@variable_other_settables), tp/Texinfo/Config.pm
	(_GNUT_initialize_special_element_info)
	(texinfo_register_special_element_info,
	GNUT_get_special_element_info), tp/Texinfo/Convert/HTML.pm
	(special_element_info, _translate_names, converter_initialize):
	change information on special elements to be set with a function,
	texinfo_register_special_element_info in Texinfo::Config, retrieved in
	the Converter with GNUT_get_special_element_info, instead of using
	customization variables.  Add the special_element_info function to
	retrieve the special elements information in the HTML Converter,
	translating special element headings only when needed.  Allow special
	element headings and targets to be undef.
	Remove SPECIAL_ELEMENTS_HEADING, SPECIAL_ELEMENTS_CLASS,
	SPECIAL_ELEMENTS_DIRECTIONS, special_elements_targets,
	special_elements_file_string and special_elements_order customization
	variables.

2022-10-31  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (_prepare_special_elements): for
	special elements order, use a hash with indices to be used to order
	the special elements instead of an array.  More code, but much easier
	to customize/modify.

2022-10-31  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm: remove 'Top' from %defaults
	'special_elements_targets', instead hardcode the empty @top target in
	the code.

2022-10-31  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (_load_htmlxref_files): do not
	set htmlxref_files converter state, use a regular array.

	* tp/Texinfo/Convert/HTML.pm (_external_node_href): remove
	_htmlxref, access directly the 'htmlxref' converter state.

2022-10-31  Patrice Dumas  <pertusus@free.fr>

	* doc/texi2any_api.texi (Translated Strings Customization),
	tp/init/documentation_examples.pm (my_format_translate_string):
	add translation strings customization example in
	documentation_examples.pm and fix in manual.

2022-10-31  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Config.pm (texinfo_register_direction_string_info):
	set converted string structure only if the argument is defined.

2022-10-30  Patrice Dumas  <pertusus@free.fr>

	* doc/texi2any_api.texi (Direction Strings Customization)
	(Getting Direction Strings), tp/Texinfo/Config.pm
	(texinfo_register_direction_string_info), tp/Texinfo/Convert/HTML.pm
	(direction_string, converter_initialize): add context information to
	direction strings customization to be able to convert in string
	and in normal context.  Update calls of direction_string() to use the
	string context for strings that end up in attributes.

2022-10-30  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Translations.pm (gdt, replace_convert_substrings):
	Split replace_convert_substrings out of gdt, corresponding to the
	substitution of replaced_substrings and conversion to Texinfo
	tree.

	* doc/texi2any_api.texi (Internationalization of Strings Function)
	(Translations Output and Customization)
	(Translated Strings Customization): add a whole chapter on
	strings internationalization, grouping Internationalization of Strings
	Function and information formerly in Basic Formatting Customization.

	* tp/t/test_utils.pl (test), tp/Texinfo/Config.pm
	(_GNUT_initialize_stage_handlers)
	(_GNUT_initialize_no_arg_commands_formatting_strings)
	(_GNUT_initialize_style_commands_formatting_info)
	(GNUT_reinitialize_init_files): add initialization of init files
	information in Texinfo::Config to isolate tests.

2022-10-29  Patrice Dumas  <pertusus@free.fr>

	Add customization of translated strings

	* doc/texi2any_api.texi (Internationalization of Strings Function)
	(Basic Formatting Customization), tp/Texinfo/Convert/HTML.pm (gdt):
	override Texinfo::Translations gdt to call format_translate_string
	user-defined formatting reference if the formatting reference is
	defined.
	Document more arguments of gdt, as they are also used for
	format_translate_string.

2022-10-29  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (direction_string, _translate_names):
	translate direction strings only when needed and cache them
	afterwards.  Remove the contents of the translated direction
	string types in _translate_names such that they will be re-translated
	in the next direction_string call.

2022-10-29  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (_convert_informative_command, _convert):
	call _translate_names() after documentlanguage conversion in converter
	code instead of calling in conversion function.

2022-10-29  Patrice Dumas  <pertusus@free.fr>

	* tp/Texinfo/Convert/HTML.pm (_translate_names): update gdt call.

2022-10-29  Patrice Dumas  <pertusus@free.fr>

	* doc/texi2any_api.texi (Element Direction Information Type)
	(Direction Strings, Getting Direction Strings), tp/Texinfo/Common.pm
	(@variable_other_settables), tp/Texinfo/Config.pm
	(texinfo_register_direction_string_info)
	(GNUT_get_direction_string_info), tp/Texinfo/Convert/HTML.pm
	(direction_string, _translate_names, converter_initialize)
	(_initialize_output_state): change customization of direction strings
	to be set with texinfo_register_direction_string_info, retrieved in
	the converter by GNUT_get_direction_string_info, translated when
	needed and retrieved in formatting code with direction_string, instead
	of using curtomization variables.  Remove the customization variables
	BUTTONS_TEXT, BUTTONS_NAME, BUTTONS_GOTO, BUTTONS_REL,
	BUTTONS_ACCESSKEY, BUTTONS_EXAMPLE.  Update functions that used the
	BUTTONS_* customization variables.

	* tp/Texinfo/Convert/HTML.pm (ACTIVE_ICONS, PASSIVE_ICONS): do not
	initialize ACTIVE_ICONS and PASSIVE_ICONS to empty strings, instead
	set to undef the customization variables as a whole.

2022-10-27  Patrice Dumas  <pertusus@free.fr>

	Add optional translation context for in-document string translations

	* doc/texi2any_api.texi (Internationalization of Strings Function),
	tp/Texinfo/Translations.pm (gdt, pgdt), po_document/Makevars
	(XGETTEXT_OPTIONS), tp/Texinfo/Convert/HTML.pm (_translate_names):
	add a translation context argument to gdt() and add pgdt() which
	has the translation context as first argument.
	Update po_document/Makevars to have pgdt arguments in the correct
	order.

2022-11-07  Gavin Smith  <gavinsmith0123@gmail.com>

	* README-hacking: new ChangeLog file done


Copyright 2022 Free Software Foundation, Inc.

Copying and distribution of this file, with or without modification,
are permitted in any medium without royalty provided the copyright
notice and this notice are preserved.
