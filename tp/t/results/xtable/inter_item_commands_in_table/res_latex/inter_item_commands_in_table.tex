\documentclass{book}
\usepackage{imakeidx}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage[gen]{eurosym}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{graphicx}
\usepackage{etoolbox}
\usepackage{enumitem}
\usepackage{titleps}
\usepackage{float}
% use hidelinks to remove boxes around links to be similar with Texinfo TeX
\usepackage[hidelinks]{hyperref}
\usepackage[utf8]{inputenc}

\makeatletter
\newcommand{\GNUTexinfosettitle}{No Title}%

\makeindex[name=cp]%
\makeindex[name=fn]%
\makeindex[name=vr]%

% command used in \description format for samp
\newcommand\GNUTexinfotablestylesamp[1]{\ifstrempty{#1}{}{{`\texttt{#1}'}}}%

% style command for var in text
\newcommand\GNUTexinfocommandstyletextvar[1]{{\normalfont{}\textsl{#1}}}%

% redefine the \mainmatter command such that it does not clear page
% as if in double page
\renewcommand\mainmatter{\clearpage\@mainmattertrue\pagenumbering{arabic}}
% add command aliases to use the same command in book and report
\newcommand\GNUTexinfomainmatter{\mainmatter}
\newcommand\GNUTexinfofrontmatter{\frontmatter}
\newenvironment{GNUTexinfopreformatted}{%
  \par\obeylines\obeyspaces\frenchspacing
  \parskip=\z@\parindent=\z@}{}
% set defaults for lists that match Texinfo TeX formatting
\setlist[description]{style=nextline, font=\normalfont}

% command that does nothing used to help with substitutions in commands
\newcommand{\GNUTexinfoplaceholder}[1]{}

% plain page style, for part and chapter, which call \thispagestyle{plain}
\renewpagestyle{plain}{\sethead[\thepage{}][][]
                             {}{}{\thepage{}}}

% single header
\newpagestyle{single}{\sethead[\chaptername{} \thechapter{} \chaptertitle{}][][\thepage]
                              {\chaptername{} \thechapter{} \chaptertitle{}}{}{\thepage}}

% called when setting single headers
\newcommand{\GNUTexinfosetsingleheader}{\pagestyle{single}}

% double header
\newpagestyle{double}{\sethead[\thepage{}][][\GNUTexinfosettitle]
                              {\chaptername{} \thechapter{} \chaptertitle{}}{}{\thepage}}

% called when setting double headers
\newcommand{\GNUTexinfosetdoubleheader}{\pagestyle{double}}


% avoid pagebreak and headings setting for a sectionning command
\newcommand{\GNUTexinfonopagebreakheading}[2]{\let\clearpage\relax \let\cleardoublepage\relax \let\thispagestyle\GNUTexinfoplaceholder #1{#2}}

\renewcommand{\includegraphics}[1]{\fbox{FIG \detokenize{#1}}}

\makeatother
% set default for @setchapternewpage
\makeatletter
\patchcmd{\chapter}{\if@openright\cleardoublepage\else\clearpage\fi}{\GNUTexinfoplaceholder{setchapternewpage placeholder}\clearpage}{}{}
\makeatother
\GNUTexinfosetsingleheader{}%


\begin{document}
\label{anchor:Top}%
\chapter{{chap}}
\label{anchor:chapter}%

\begin{description}
\item[{\parbox[b]{\linewidth}{%
\texttt{acode{-}{-}b}
\index[vr]{acode--b@\texttt{acode{-}{-}b}}%
}}]
l--ine
\end{description}

\begin{description}
\item[{\parbox[b]{\linewidth}{%
aasis--b\\
\index[vr]{aasis--b@\texttt{aasis{-}{-}b}}%
b
\index[vr]{b@\texttt{b}}%
}}]
l--ine
\end{description}

\begin{description}
\item[{\parbox[b]{\linewidth}{%
\GNUTexinfocommandstyletextvar{avar--b}\\
\index[fn]{avar--b@\texttt{avar{-}{-}b}}%
\index[cp]{index entry between item and itemx}%
\GNUTexinfocommandstyletextvar{b}
\index[fn]{b@\texttt{b}}%
}}]
l--ine
\item[{\parbox[b]{\linewidth}{%
\GNUTexinfocommandstyletextvar{c}\\
\index[fn]{c@\texttt{c}}%
\GNUTexinfocommandstyletextvar{d}
\index[fn]{d@\texttt{d}}%
}}]

\end{description}

\begin{description}
\item[] \index[cp]{cindex in table}%
\item[{\parbox[b]{\linewidth}{%
\texttt{abb}}}]
l--ine
\end{description}

\begin{description}
\item[] \index[cp]{cindex in table}%
Texte before first item.
\item[{\parbox[b]{\linewidth}{%
\texttt{abb}}}]
\end{description}

\begin{description}
\item[] \index[cp]{samp cindex in table}%
\item[{\parbox[b]{\linewidth}{%
\GNUTexinfotablestylesamp{asamp{-}{-}bb}}}]
l--ine samp
\end{description}

\begin{description}
\item[] \index[cp]{samp cindex in table}%
Texte before first item samp.
\item[{\parbox[b]{\linewidth}{%
\GNUTexinfotablestylesamp{asamp{-}{-}bb}}}]
\end{description}

\begin{description}
\item[] 
\index[cp]{cindex between lines}%

\item[{\parbox[b]{\linewidth}{%
\GNUTexinfotablestylesamp{asamp{-}{-}bb1}}}]
\end{description}

\begin{description}
\item[] \index[cp]{cindex before line}%

\item[{\parbox[b]{\linewidth}{%
\GNUTexinfotablestylesamp{asamp{-}{-}bb2}}}]
\end{description}

\begin{description}
\item[] 
\index[cp]{cindex after line}%
\item[{\parbox[b]{\linewidth}{%
\GNUTexinfotablestylesamp{asamp{-}{-}bb2}}}]
\end{description}

\begin{description}
\item[] \index[cp]{cindex first}%
\index[cp]{second}%
\index[cp]{third}%
\item[{\parbox[b]{\linewidth}{%
\GNUTexinfotablestylesamp{asamp{-}{-}bb2}}}]
\end{description}


\end{document}
